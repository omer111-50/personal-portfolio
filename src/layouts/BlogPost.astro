---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import Footer from '@/components/Footer.tsx';
import FormattedDate from "@/lib/utils.ts";
import Header from '@/components/Header.tsx';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<Layout title={title} description={description}>
	<!-- Header -->
	<Header client:only="react" pathname={Astro.url.pathname} />
	
	<main class="container max-w-5xl mx-auto px-6 md:px-4 py-8">
		<article>
			{/* Hero Image */}
			{heroImage && (
				<div class="mb-8 overflow-hidden rounded-lg">
					<Image 
						width={1020} 
						height={510} 
						src={heroImage} 
						alt={title}
						class="w-full h-auto"
					/>
				</div>
			)}
			
			{/* Article Content */}
			<div class="prose prose-lg max-w-none">
				{/* Article Header */}
                <header class="text-center mb-8 pb-6 border-b border-primary/20">
					<div class="text-gray-600 mb-4">
						<time class="text-sm">
							<FormattedDate date={pubDate} />
						</time>
						{updatedDate && (
							<div class="text-sm italic mt-1">
								Last updated on <FormattedDate date={updatedDate} />
							</div>
						)}
					</div>
					<h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
						{title}
					</h1>
				</header>
				
				{/* Article Body */}
                <div class="prose prose-lg max-w-none prose-a:text-primary prose-strong:text-tertiary prose-h1:text-tertiary prose-h2:text-tertiary prose-h3:text-tertiary">
					<slot />
				</div>
			</div>
		</article>
	</main>
	
	<!-- Footer -->
	<Footer client:only="react" />
</Layout>
